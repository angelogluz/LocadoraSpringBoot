<!DOCTYPE html>
<html lang="pt" xmlns:th="http://www.w3.org/1999/xhtml">
    <head>
        <!-- Required meta tags -->
        <meta charset="utf-8"/>
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/>

        <!-- Bootstrap CSS -->
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta/css/bootstrap.min.css" integrity="sha384-/Y6pD6FV/Vv2HJnA6t+vslU6fwYXjCFtcEpHbNJ0lyAFsXTsjBbfaDjzALeQsN6M" crossorigin="anonymous"/>
   
    <nav class="nav">
        <a class="nav-link" href="/usuario">Usuario</a>
        <a class="nav-link" href="/filme">Filme</a>
        <a class="nav-link active" href="/locacao">Locação</a>
    </nav>
    
    </head>
    <body>

        <h1>Cadastro de Locação</h1>

        <div>
            <form th:object="${locacao}" th:action="@{/locacao}" method="post">
                <input type="hidden" th:field="*{id}" />
                <label for="usuario">Usuário</label>
                <select class="custom-select" th:field="*{usuario}">
                    <option th:each="usuario : ${usuarios}"
                            th:value="${{usuario}}"
                            th:text="${usuario.nome}">
                        Usuário
                    </option>    
                </select>
                <br/>
                <br/>
                <label for="filmes">Filmes a locar (Utilizar a tecla Control para selecionar mais de um):</label>
                <select class="container" id="filmes" th:field="*{filmes}" size="10" multiple="true" required="true">
                    <option th:each="filme : ${todosFilmes}"
                            th:value="${{filme}}"
                            th:text="${filme.nome} + '  |  Em Estoque: ' +  ${filme.estoque} + ' |  Valor: R$'+ ${#numbers.formatDecimal(filme.precoLocacao,1,2)}">
                        Filme
                    </option>
                </select>
                <br />
                <button type="submit" class="btn btn-primary">Salvar</button>
            </form>
        </div>
<br/>
        <div th:unless="${#lists.isEmpty(locacoes)}">
            <table class="table">
                <thead>
                    <tr>
                        
                        <th>Nome</th>
                        <th>Data de Locação</th>
                        <th>Data de Entrega</th>
                        <th>Filmes</th>
                        <th>Valor</th>
                    </tr>
                </thead>
                <tbody>
                    <tr th:each="locacao : ${locacoes}" >
                        <td th:text="${locacao.usuario.nome}" scope="row"/>
                        <td th:text="${{locacao.dataLocacao}}"/>
 +                      <td th:text="${{locacao.dataRetorno}}"/>
                        <td th:text="${locacao.filmes}"/>
                        <td th:text="|R$ ${{locacao.valor}}|"/>
                    </tr>
                </tbody>
            </table>
        </div>


        <!-- Optional JavaScript -->
        <!-- jQuery first, then Popper.js, then Bootstrap JS -->
        <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.11.0/umd/popper.min.js" integrity="sha384-b/U6ypiBEHpOf/4+1nzFpr53nxSS+GLCkfwBdFNTxtclqqenISfwAzpKaMNFNmj4" crossorigin="anonymous"></script>
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta/js/bootstrap.min.js" integrity="sha384-h0AbiXch4ZDo7tp9hKZ4TsHbi047NrKGLO3SEJAg45jXxnGIfYzk4Si90RDIqNm1" crossorigin="anonymous"></script>
    </body>
</html>
